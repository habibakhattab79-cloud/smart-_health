<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Health Comparison</title>

<style>
body{
  font-family:Arial;
  background:#f4f6fb;
  margin:0;
  padding:20px;
}

header{
  background:#4f7cff;
  color:white;
  padding:20px;
  position:relative;
  text-align:center;
  font-size:22px;
}

.nav{
  position:absolute;
  top:20px;
  right:20px;
  cursor:pointer;
  font-size:26px;
  user-select:none;
}

.nav-content{
  display:none;
  position:absolute;
  right:20px;
  top:60px;
  background:white;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  border-radius:10px;
  overflow:hidden;
  z-index:10;
  min-width:160px;
}

.nav-content a{
  display:block;
  padding:12px 15px;
  color:#333;
  text-decoration:none;
}

.nav-content a:hover{
  background:#f0f0f0;
}

.card{
  background:white;
  max-width:550px;
  margin:20px auto;
  padding:20px;
  border-radius:14px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

h2{text-align:center;}

.row{
  display:flex;
  justify-content:space-between;
  margin:8px 0;
}

.good{color:green;font-weight:bold;}
.bad{color:red;font-weight:bold;}
.neutral{color:gray;}


body.dark{
  background:#121212;
  color:white;
}



</style>
</head>

<body>

<header>
  Comparison
  <!-- 3 شرط -->
  <div class="nav" onclick="toggleNav()">☰</div>

  <div class="nav-content" id="navMenu">
    <a href="data.html">Data</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="comparison.html">Comparison</a>
    <a href="assistant.html">AI</a>
    <a href="settings.html">Settings</a>
  </div>
</header>

<div class="card">
  <h2>Today vs Yesterday</h2>
  <div id="dailyCompare"></div>
</div>

<div class="card">
  <h2>This Week vs Last Week</h2>
  <div id="weeklyCompare"></div>
</div>

<script>
function toggleNav(){
  const menu = document.getElementById("navMenu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

const metrics = [
  {key:"sleep",label:"Sleep",reverse:false},
  {key:"water",label:"Water",reverse:false},
  {key:"exercise",label:"Exercise",reverse:false},
  {key:"calories",label:"Calories",reverse:true},
  {key:"mood",label:"Mood",reverse:false},
  {key:"focus",label:"Focus",reverse:false},
  {key:"energy",label:"Energy",reverse:false},
  {key:"stress",label:"Stress",reverse:true},
  {key:"screenTime",label:"Screen Time",reverse:true}
];

const num = k => Number(localStorage.getItem(k)) || 0;

function compare(a,b,reverse){
  if(a===b) return `<span class="neutral">Same</span>`;
  if(!reverse) return a>b ? `<span class="good">Better</span>` : `<span class="bad">Worse</span>`;
  return a<b ? `<span class="good">Better</span>` : `<span class="bad">Worse</span>`;
}

/* Today vs Yesterday */
let dailyHTML="";
metrics.forEach(m=>{
  dailyHTML += `
    <div class="row">
      <div>${m.label}</div>
      <div>${compare(num(m.key), num("y_"+m.key), m.reverse)}</div>
    </div>`;
});
document.getElementById("dailyCompare").innerHTML = dailyHTML;

/* This Week vs Last Week */
function avg(arr){
  return arr.length ? arr.reduce((a,b)=>a+b,0)/arr.length : 0;
}

let weeklyHTML="";
metrics.forEach(m=>{
  const week = JSON.parse(localStorage.getItem("week_"+m.key) || "[]");
  const lastWeek = JSON.parse(localStorage.getItem("lastWeek_"+m.key) || "[]");
  weeklyHTML += `
    <div class="row">
      <div>${m.label}</div>
      <div>${compare(avg(week), avg(lastWeek), m.reverse)}</div>
    </div>`;
});
document.getElementById("weeklyCompare").innerHTML = weeklyHTML;
</script>
<script src="app.js"></script>

</body>
</html>
